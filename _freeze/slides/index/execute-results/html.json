{
  "hash": "f3f4e83f5010a2316c8d698f6cb46f6d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Data Cleaning for Data Sharing<br> Using R\"\nauthor: \"Crystal Lewis // April 11, 2024<br>NCME Annual Meeting\"\nfooter: \"Data Cleaning for Data Sharing // [Cghlewis.github.io/ncme-data-cleaning-workshop/](https://Cghlewis.github.io/ncme-data-cleaning-workshop/)\"\nlogo: \"images/NCME-AnnualMeeting2024Logo-F.png\"\nformat: \n  revealjs: \n    width: 1600\n    height: 900  \n    theme: slides.scss\n    highlight-style: a11y\n    transition: fade\n    slide-number: true\nexecute:\n  echo: true\ndf-print: kable\n---\n\n::: {.cell}\n\n:::\n\n## About the Speaker\n\n::: columns\n::: {.column width=\"50%\"}\n\n- Independent Research Data Management Consultant\n   - [cghlewis.com](https://cghlewis.com/)\n- Previously data manager for the Missouri Prevention Science Institute\n- Co-organizer for R-Ladies St. Louis\n  - [meetup.com/rladies-st-louis](https://www.meetup.com/rladies-st-louis/)\n- Co-organizer for the POWER Data Management in Education Research Hub\n  - [https://osf.io/ap3tk/](https://osf.io/ap3tk/)\n- Author \"Data Management in Large-Scale Education Research\"\n  - [datamgmtinedresearch.com](https://datamgmtinedresearch.com/)\n\n:::\n \n::: {.column width=\"50%\"}\n![](images/book-cover.jpg){fig-align=\"center\" width=60%}\n\n:::\n:::\n\n## Introductions\n\n::: columns\n::: {.column width=\"60%\"}\n\n- Your name\n- Your affiliation\n- Your role\n- Your data cleaning experience\n  - Original data that you/your team has collected\n  - External datasets\n- Your experience with R\n  - Tidyverse experience?\n\n:::\n \n::: {.column width=\"40%\"}\n![Image from [Unsplash](https://unsplash.com/photos/brown-and-black-short-coated-small-dog-with-white-long-coat-small-dog-on-gray-concrete-NIKl5WwL-RE)](images/greeting.jpg){fig-align=\"center\"}\n:::\n:::\n\n\n## 3 Phases of Data\n\n![](images/phases.jpg){fig-align=\"center\"}\n\n::: {.notes}\nRaw data may be original data that you collected\nIt may be externally collected data that you extracted from a site or received from a partner\nHere I just simply mean you have conducted no transformations on the data\n:::\n\n## A Sampling of Open Datasets\n\n::: {.r-stack}\n\n\n![](images/publicdata5.PNG){.fragment}\n\n\n![](images/publicdata2.PNG){.fragment}\n\n\n![](images/publicdata1-1.PNG){.fragment}\n\n\n![](images/publicdata6.PNG){.fragment}\n\n\n![](images/publicdata4.PNG){.fragment}\n\n\n:::\n\n::: {.notes}\nWhat do you notice when you look at these different datasets?\n\nThere is no real consistency in how data is structured, variables are named, o\n\nAdhering to common standards for data quality allows our data to be consistently cleaned and organized within and across projects. There are several data quality criteria that are commonly agreed upon \n:::\n\n## Learning Objectives\n\n::: incremental\n\n1.  Understand how to assess a data set for 7 data quality indicators\n\n<br>\n\n2.  Be able to review a data set and apply a list of standardized data cleaning steps as needed\n\n<br>\n\n3.  Feel comfortable using R code to clean a data set using our standardized steps\n\n<br>\n\n4.  Understand types of documentation that should be shared alongside data\n\n:::\n\n::: {.notes}\nBefore cleaning our data, we need to have a shared understanding for what we expect our data to look like once it is cleaned. \n:::\n\n\n## Schedule\n\n<br>\n\n\n| Time          | Topic           |\n|---------------|--------------------|\n|8:45 - 9:00  |   Intro/Logistics | \n|9:00 - 9:45 | Fundamentals of Data Organization|\n|9:45 - 10:30 | Standardized Data Cleaning Checklist|\n|10:30 - 10:45 | Break|\n|10:45 - 12:30 | Data Cleaning Functions|\n|12:30 - 12:45 | Documentation for Data Sharing|\n\n  \n## Logistics\n\n**Exercises**\n\nLogin to Posit Cloud workspace: [**https://posit.cloud/content/7872027**](https://posit.cloud/content/7872027).\n\n. . .\n\n<br>\n\nIf Posit Cloud doesn't work, download materials locally:\n\n::: {.cell}\n\n```{.r .cell-code}\nusethis::use_course(\n  \"https://github.com/jadeynryan/parameterized-quarto-workshop/raw/main/exercises/exercises.zip\"\n#  ,destdir = \"___\"\n  )\n```\n:::\n\n. . .\n\n<br>\n\nFeel free to interrupt me with questions/comments at any time âœ‹.\n\n. . .\n\n<br>\n\nGet up and move around as much as you need to ðŸš¶.\n  \n\n# Data Quality Indicators {.background-secondary}\n\n## The Data are Ready\n\n![](images/data-ready.PNG){fig-align=\"center\" width=\"80%\"}\n\n## 7 Data Quality Indicators\n\n::: columns\n::: {.column width=\"40%\"}\n\n<br>\n\n1. Analyzable\n\n2. Interpretable\n\n3. Complete\n\n4. Valid\n\n5. Accurate\n\n6. Consistent\n\n7. De-identified\n\n\n:::\n \n::: {.column width=\"60%\"}\n\n![Taming the Data Beast, by Allison Horst](images/data_beast_allison_horst.jpeg)\n\n:::\n:::\n\n## Analyzable\n\n- Data should make a rectangle of rows and columns\n  - The first row, and only the first row, is your variable names\n  - The remaining data should be made up of values in cells\n  - At least one column uniquely defines the rows in the data (e.g., unique identifier)\n\n![](images/quality-analyze1.PNG){fig-align=\"center\"}\n\n## Analyzable\n\n- Column values are analyzable\n  - Information is explicit\n  \n![](images/quality-analyze2.PNG){fig-align=\"center\" width=\"70%\"}\n\n## Analyzable\n\n<br>\n\n![](images/quality-analyze3.PNG){fig-align=\"center\"}\n\n## Analyzable\n\n- Only one piece of information is collected per variable\n\n![](images/quality-analyze4.PNG){fig-align=\"center\"}\n\n\n## [Exercise]{style=\"color:#ccd64d\"}{.background-secondary}\n\n<br>\n\nWhat data quality issues do you detect for the \"analyzable\" indicator?\n\n![](images/example-data.PNG){fig-align=\"center\"}\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_edfcec9e\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;--countdown-font-size:2em;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n## [Solution]{style=\"color:#ccd64d\"}{.background-secondary}\n\n- Data does not make a rectangle\n- Color coding used to convey information\n- More than one piece of information in a variable\n- Blank values implied to be 0 for `Q4`{style=\"color:#ccd64d\"} variables\n\n\n![](images/quality-exercise1.PNG){fig-align=\"center\"}\n\n## Interpretable\n\n::: columns\n::: {.column width=\"50%\"}\n\n\n- Variable names should be machine-readable\n  - Unique\n  - No spaces or special characters except `_`\n    - This includes no `.` or `-`\n  - Not begin with a number\n\n- Variable names should be human-readable\n  - Meaningful (`gender` instead of `Q1`)\n  - Consistently formatted (capitalization and delimiters)\n  - Consistent order of information\n    - `w1_t_mast1`, `w1_t_mast2`, `w1_t_gad1`, `w1_t_gad2`, `w1_t_gender`\n\n:::\n \n::: {.column width=\"50%\"}\n\n![In that case, by Allison Horst](images/naming_case.jpg)\n\n:::\n:::\n\n## Interpretable\n\n- If you are sharing data in SPSS, SAS, or Stata format, you may consider adding embedded metadata (i.e., **variable label** and **value labels**)\n  - When publicly sharing data, it is recommended to share data in at least one non-proprietary format (e.g., CSV)\n  \n![](images/quality-interpret1.PNG){fig-align=\"center\"}\n\n## [Exercise]{style=\"color:#ccd64d\"}{.background-secondary}\n\n<br>\n\nWhat data quality issues do you detect for the \"interpretable\" indicator?\n\n![](images/example-data.PNG){fig-align=\"center\"}\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_798d5cde\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;--countdown-font-size:2em;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n## [Solution]{style=\"color:#ccd64d\"}{.background-secondary}\n\n- Spaces and special characters used in variable names\n- Some variable names are unclear\n- Inconsistent use of capitalization\n\n![](images/quality-exercise2.PNG){fig-align=\"center\"}\n\n## Complete\n\n- Cases\n  - The number of rows in your dataset should total to your sample N\n    - No missing cases\n    - No duplicate cases (i.e., no unique identifier)\n    \n- Variables\n  - The number of columns in your dataset should total to what you planned to have\n    - No missing variables\n  - No unexpected missing data\n    - If you collected the data, it should exist in the dataset\n\n## Helpful documentation\n\n#### Tracking Database\n\n![](images/quality-complete1.PNG){fig-align=\"center\"}\n\n#### Data Dictionary\n\n![](images/quality-complete2.PNG){fig-align=\"center\"}\n\n\n## [Exercise]{style=\"color:#ccd64d\"}{.background-secondary}\n\n<br>\n\nWhat data quality issues do you detect for the \"complete\" indicator?\n\n![](images/example-data.PNG){fig-align=\"center\"}\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_0bde2089\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;--countdown-font-size:2em;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n\n## [Solution]{style=\"color:#ccd64d\"}{.background-secondary}\n\n- The data contain a duplicate ID (104)\n\n![](images/quality-exercise3.PNG){fig-align=\"center\"}\n\n## Valid\n\n- Variables conform to your planned constraints (i.e., review your data dictionary)\n  - Planned variable types\n  - Allowable variable values and ranges\n  - Item-level missingness aligns with variable universe rules and skip patterns\n  \n![](images/quality-valid1.PNG){fig-align=\"center\"}\n\n\n## [Exercise]{style=\"color:#ccd64d\"}{.background-secondary}\n\n<br>\n\nWhat data quality issues do you detect for the \"valid\" indicator?\n\n![](images/example-data.PNG){fig-align=\"center\"}\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_2ea1a1b0\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;--countdown-font-size:2em;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n## [Solution]{style=\"color:#ccd64d\"}{.background-secondary}\n\n- `AGE/YR`{style=\"color:#ccd64d\"} does not adhere to our planned variable type\n- Values in `Score`{style=\"color:#ccd64d\"} fall out of our expected range\n\n![](images/quality-exercise4.PNG){fig-align=\"center\"}\n\n\n## Accurate\n\n- Information should be accurate based on any implicit knowledge you have\n  - For instance, values should not exist for a school where you know that data was not collected that wave\n\n- Accurate within and across sources\n  - A date of birth collected from school records should match the date of birth provided by the student\n  - If a student is in 2nd grade, they should be associated with a second grade teacher\n  \n## [Exercise]{style=\"color:#ccd64d\"}{.background-secondary}\n\n<br>\n\nWhat data quality issues do you detect for the \"accurate\" indicator?\n\n![](images/example-data.PNG){fig-align=\"center\"}\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_c0802368\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;--countdown-font-size:2em;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n## [Solution]{style=\"color:#ccd64d\"}{.background-secondary}\n\n- ID 105 has conflicting information for `TEACHING LEVEL`style=\"color:#ccd64d\"} and `SCHOOL`{style=\"color:#ccd64d\"}\n\n![](images/quality-exercise5.PNG){fig-align=\"center\"}\n\n## Consistent\n\n- Variable values are consistently measured, formatted, or categorized within a column\n\n- Variables are consistently measured across collections of the same form\n\n![](images/quality-consistent1.PNG){fig-align=\"center\"}\n\n\n## [Exercise]{style=\"color:#ccd64d\"}{.background-secondary}\n\n<br>\n\nWhat data quality issues do you detect for the \"consistent\" indicator?\n\n![](images/example-data.PNG){fig-align=\"center\"}\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_22643a3b\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;--countdown-font-size:2em;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n## [Solution]{style=\"color:#ccd64d\"}{.background-secondary}\n\n- Values for `GENDER`{style=\"color:#ccd64d\"} are not consistently categorized\n\n![](images/quality-exercise6.PNG){fig-align=\"center\"}\n\n## De-identified\n\n![](images/quality-identify1.PNG){fig-align=\"center\"}\n\n## [Exercise]{style=\"color:#ccd64d\"}{.background-secondary}\n\n<br>\n\nWhat data quality issues do you detect for the \"de-identified\" indicator?\n\n![](images/example-data.PNG){fig-align=\"center\"}\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"countdown\" id=\"timer_80f06696\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;--countdown-font-size:2em;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">01</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n\n:::\n:::\n\n## [Solution]{style=\"color:#ccd64d\"}{.background-secondary}\n\n- Replace School Name with an unique ID\n- Review combination of demographics to see if other alterations are necessary\n\n![](images/quality-exercise7.PNG){fig-align=\"center\"}\n\n\n\n# Data Cleaning Checklist {.background-secondary}\n\n## Standardized Checklist\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown-0.5.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/countdown-0.5.0/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}